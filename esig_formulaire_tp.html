<!DOCTYPE html>
<html lang="fr">
```html
<script src="api-config.js"></script>
<script src="api.js"></script>
```
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESIG Global Success - Formulaire TP Atelier</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a365d;
            --secondary: #2563eb;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --light: #f3f4f6;
            --dark: #1f2937;
            --border: #d1d5db;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, var(--primary), #2c5282);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .logo {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }

        .logo-subtitle {
            font-size: 1.3em;
            opacity: 0.95;
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }

        header h1 {
            font-size: 2em;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
            margin-top: 10px;
            position: relative;
            z-index: 1;
        }

        .content {
            padding: 40px;
        }

        .form-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 5px solid var(--secondary);
        }

        .form-section h2 {
            color: var(--primary);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--accent);
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 20px 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
            font-size: 1.05em;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: var(--light);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .checkbox-item:hover {
            background: #e5e7eb;
            transform: translateX(5px);
        }

        .checkbox-item input[type="checkbox"] {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            cursor: pointer;
            accent-color: var(--secondary);
        }

        .checkbox-item label {
            cursor: pointer;
            font-weight: 500;
            margin: 0;
            flex: 1;
        }

        .checkbox-item.checked {
            background: #dbeafe;
            border-color: var(--secondary);
        }

        .member-list {
            background: var(--light);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .member-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .member-item:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }

        .member-info {
            flex: 1;
        }

        .member-info strong {
            color: var(--primary);
            font-size: 1.1em;
        }

        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--secondary), #1d4ed8);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #1d4ed8, var(--secondary));
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #059669, var(--success));
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #dc2626, var(--danger));
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .alert {
            padding: 18px 24px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.05em;
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 5px solid var(--secondary);
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border-left: 5px solid var(--success);
        }

        .alert-warning {
            background: #fef3c7;
            color: #92400e;
            border-left: 5px solid var(--accent);
        }

        .summary-card {
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid var(--border);
        }

        .summary-card h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .summary-item {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .summary-item strong {
            color: var(--dark);
        }

        .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            background: var(--secondary);
            color: white;
        }

        .footer {
            background: var(--primary);
            color: white;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
        }

        .footer p {
            margin: 5px 0;
            opacity: 0.9;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }

            .btn, .alert-info {
                display: none;
            }

            .container {
                box-shadow: none;
            }

            .form-section {
                page-break-inside: avoid;
            }
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .checkbox-grid {
                grid-template-columns: 1fr;
            }

            .logo {
                font-size: 2em;
            }

            header h1 {
                font-size: 1.5em;
            }

            .member-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        .required {
            color: var(--danger);
            margin-left: 4px;
        }

        .icon {
            font-size: 1.3em;
        }

        .divider {
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--secondary), transparent);
            margin: 40px 0;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">üèÜ ESIG</div>
            <div class="logo-subtitle">GLOBAL SUCCESS</div>
            <h1>Formulaire de Pr√©paration TP Atelier</h1>
            <p>Syst√®me de Gestion et Tra√ßabilit√© des Travaux Pratiques</p>
        </header>

        <div class="content">
            <div class="alert alert-info">
                <span class="icon">‚ÑπÔ∏è</span>
                <div>
                    <strong>Instructions:</strong> Remplissez tous les champs obligatoires avant de commencer votre TP.
                    Ce formulaire assure la tra√ßabilit√© et la s√©curit√© de tous les travaux pratiques.
                </div>
            </div>

            <form id="tpForm" onsubmit="handleSubmit(event)">
                <!-- INFORMATIONS G√âN√âRALES -->
                <div class="form-section">
                    <h2><span class="icon">üìã</span> Informations G√©n√©rales</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Date du TP <span class="required">*</span></label>
                            <input type="date" id="dateTP" required>
                        </div>
                        <div class="form-group">
                            <label>Heure de d√©but <span class="required">*</span></label>
                            <input type="time" id="heureDebut" required>
                        </div>
                        <div class="form-group">
                            <label>Dur√©e estim√©e <span class="required">*</span></label>
                            <select id="duree" required>
                                <option value="">S√©lectionner</option>
                                <option value="1h">1 heure</option>
                                <option value="2h">2 heures</option>
                                <option value="3h">3 heures</option>
                                <option value="4h">4 heures</option>
                                <option value="journee">Journ√©e compl√®te</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Machine/√âquipement principal <span class="required">*</span></label>
                            <select id="machine" required>
                                <option value="">S√©lectionner une machine</option>
                                <option value="FRAIS-380-001">Fraiseuse Universelle</option>
                                <option value="TOUR-380-001">Tour Parall√®le</option>
                                <option value="CNC-LASER-001">CNC Laser CO2</option>
                                <option value="CNC-FRAIS-001">CNC Fraiseuse 3 axes</option>
                                <option value="SOUD-380-001">Soudure MIG/MAG</option>
                                <option value="COMP-380-001">Compresseur</option>
                                <option value="USIN-380-001">Perceuse Colonne</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Titre/Objectif du TP <span class="required">*</span></label>
                        <input type="text" id="titreTP" placeholder="Ex: Usinage d'une pi√®ce cylindrique" required>
                    </div>
                    <div class="form-group">
                        <label>Description d√©taill√©e du travail</label>
                        <textarea id="description" rows="4" placeholder="D√©crivez les op√©rations qui seront effectu√©es..."></textarea>
                    </div>
                </div>

                <!-- RESPONSABLE ATELIER -->
                <div class="form-section">
                    <h2><span class="icon">üë®‚Äçüè´</span> Responsable de l'Atelier</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nom du responsable <span class="required">*</span></label>
                            <input type="text" id="nomResponsable" placeholder="Nom complet" required>
                        </div>
                        <div class="form-group">
                            <label>Num√©ro de t√©l√©phone <span class="required">*</span></label>
                            <input type="tel" id="telResponsable" placeholder="+228 XX XX XX XX" pattern="[\+]?[0-9]{8,}" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="emailResponsable" placeholder="responsable@esig.tg">
                        </div>
                        <div class="form-group">
                            <label>Fonction</label>
                            <select id="fonctionResponsable">
                                <option value="">S√©lectionner</option>
                                <option value="enseignant">Enseignant</option>
                                <option value="chef-atelier">Chef d'Atelier</option>
                                <option value="technicien">Technicien</option>
                                <option value="superviseur">Superviseur</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- MEMBRES DE L'√âQUIPE -->
                <div class="form-section">
                    <h2><span class="icon">üë•</span> Membres de l'√âquipe</h2>
                    <div class="alert alert-info">
                        <span class="icon">üí°</span>
                        Ajoutez tous les √©tudiants/participants qui travailleront sur ce TP
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nom complet du membre</label>
                            <input type="text" id="nomMembre" placeholder="Nom et pr√©nom">
                        </div>
                        <div class="form-group">
                            <label>Matricule/Num√©ro √©tudiant</label>
                            <input type="text" id="matriculeMembre" placeholder="Ex: ESG2025001">
                        </div>
                        <div class="form-group">
                            <label>Classe/Niveau</label>
                            <select id="classeMembre">
                                <option value="">S√©lectionner</option>
                                <option value="L1">Licence 1</option>
                                <option value="L2">Licence 2</option>
                                <option value="L3">Licence 3</option>
                                <option value="M1">Master 1</option>
                                <option value="M2">Master 2</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>R√¥le dans le TP</label>
                            <select id="roleMembre">
                                <option value="">S√©lectionner</option>
                                <option value="operateur-principal">Op√©rateur principal</option>
                                <option value="assistant">Assistant</option>
                                <option value="observateur">Observateur</option>
                                <option value="mesures">Responsable mesures</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="addMember()">
                        <span class="icon">‚ûï</span> Ajouter ce membre
                    </button>

                    <div class="member-list" id="memberList">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">Liste des membres (0)</h3>
                        <p id="noMembers" style="text-align: center; color: #6b7280; padding: 20px;">
                            Aucun membre ajout√© pour le moment
                        </p>
                    </div>
                </div>

                <!-- √âQUIPEMENTS DE S√âCURIT√â (EPI) -->
                <div class="form-section">
                    <h2><span class="icon">ü¶∫</span> √âquipements de Protection Individuelle (EPI)</h2>
                    <div class="alert alert-warning">
                        <span class="icon">‚ö†Ô∏è</span>
                        <strong>Obligatoire:</strong> S√©lectionnez tous les EPI qui seront utilis√©s pendant ce TP
                    </div>

                    <h3 style="color: var(--primary); margin: 25px 0 15px 0;">EPI Obligatoires</h3>
                    <div class="checkbox-grid" id="epiObligatoires">
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="chaussures-securite" id="epi1">
                            <label for="epi1">üë∑ Chaussures de s√©curit√© S3</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="lunettes-protection" id="epi2">
                            <label for="epi2">üëì Lunettes de protection</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="blouse" id="epi3">
                            <label for="epi3">üëî Blouse/V√™tements de travail</label>
                        </div>
                    </div>

                    <h3 style="color: var(--primary); margin: 25px 0 15px 0;">EPI Selon Activit√©</h3>
                    <div class="checkbox-grid" id="epiOptionnels">
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="gants-anticoupure" id="epi4">
                            <label for="epi4">üß§ Gants anti-coupure</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="masque-soudure" id="epi5">
                            <label for="epi5">üò∑ Masque de soudure</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="protection-auditive" id="epi6">
                            <label for="epi6">üëÇ Protection auditive (>85dB)</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="masque-respiratoire" id="epi7">
                            <label for="epi7">üò∑ Masque respiratoire</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="tablier-protection" id="epi8">
                            <label for="epi8">ü¶∫ Tablier de protection</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="gants-thermiques" id="epi9">
                            <label for="epi9">üß§ Gants thermiques</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="casque" id="epi10">
                            <label for="epi10">‚õëÔ∏è Casque de s√©curit√©</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="epi" value="gants-isolants" id="epi11">
                            <label for="epi11">üß§ Gants isolants √©lectriques</label>
                        </div>
                    </div>
                </div>

                <!-- OUTILS ET √âQUIPEMENTS -->
                <div class="form-section">
                    <h2><span class="icon">üîß</span> Outils et √âquipements Utilis√©s</h2>
                    <div class="alert alert-info">
                        <span class="icon">‚ÑπÔ∏è</span>
                        S√©lectionnez tous les outils qui seront n√©cessaires pour ce TP
                    </div>

                    <h3 style="color: var(--primary); margin: 25px 0 15px 0;">Outils de Mesure</h3>
                    <div class="checkbox-grid">
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="pied-coulisse" id="outil1">
                            <label for="outil1">üìè Pied √† coulisse</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="micrometre" id="outil2">
                            <label for="outil2">üìè Microm√®tre</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="comparateur" id="outil3">
                            <label for="outil3">üìè Comparateur</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="jauge" id="outil4">
                            <label for="outil4">üìè Jauge d'√©paisseur</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="equerre" id="outil5">
                            <label for="outil5">üìê √âquerre de contr√¥le</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="rugosimetre" id="outil6">
                            <label for="outil6">üìä Rugosim√®tre</label>
                        </div>
                    </div>

                    <h3 style="color: var(--primary); margin: 25px 0 15px 0;">Outils de Coupe et Usinage</h3>
                    <div class="checkbox-grid">
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="forets" id="outil7">
                            <label for="outil7">üî© Forets HSS</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="fraises" id="outil8">
                            <label for="outil8">‚öôÔ∏è Fraises (2 tailles, 3 tailles, etc.)</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="outils-tournage" id="outil9">
                            <label for="outil9">üîß Outils de tournage</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="tarauds" id="outil10">
                            <label for="outil10">üî© Tarauds et fili√®res</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="alesoirs" id="outil11">
                            <label for="outil11">üîß Al√©soirs</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="lames-scie" id="outil12">
                            <label for="outil12">ü™ö Lames de scie</label>
                        </div>
                    </div>

                    <h3 style="color: var(--primary); margin: 25px 0 15px 0;">Outils de Fixation et Serrage</h3>
                    <div class="checkbox-grid">
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="etau" id="outil13">
                            <label for="outil13">üî® √âtau</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="mandrin" id="outil14">
                            <label for="outil14">‚öôÔ∏è Mandrin de serrage</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="plateau" id="outil15">
                            <label for="outil15">‚öôÔ∏è Plateau 4 mors</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="serre-joints" id="outil16">
                            <label for="outil16">üîß Serre-joints</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="cales" id="outil17">
                            <label for="outil17">üì¶ Cales parall√®les</label>
                        </div>
                    </div>

                    <h3 style="color: var(--primary); margin: 25px 0 15px 0;">Outils √âlectriques/√âlectroniques</h3>
                    <div class="checkbox-grid">
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="multimetre" id="outil18">
                            <label for="outil18">üîå Multim√®tre</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="oscilloscope" id="outil19">
                            <label for="outil19">üìä Oscilloscope</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="fer-souder" id="outil20">
                            <label for="outil20">üî• Fer √† souder</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="poste-soudure" id="outil21">
                            <label for="outil21">‚ö° Poste de soudure</label>
                        </div>
                    </div>

                    <h3 style="color: var(--primary); margin: 25px 0 15px 0;">Autres Outils</h3>
                    <div class="checkbox-grid">
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="marteau" id="outil22">
                            <label for="outil22">üî® Marteau</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="tournevis" id="outil23">
                            <label for="outil23">ü™õ Jeu de tournevis</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="cles" id="outil24">
                            <label for="outil24">üîß Cl√©s (plates, √† pipe)</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="lime" id="outil25">
                            <label for="outil25">üìè Limes</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="pointeau" id="outil26">
                            <label for="outil26">üìç Pointeau</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="outil" value="traceur" id="outil27">
                            <label for="outil27">‚úèÔ∏è Traceur/Pointe √† tracer</label>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 25px;">
                        <label>Autres outils n√©cessaires (non list√©s)</label>
                        <textarea id="autresOutils" rows="3" placeholder="Listez les autres outils sp√©cifiques dont vous aurez besoin..."></textarea>
                    </div>
                </div>

                <!-- CONSOMMABLES -->
                <div class="form-section">
                    <h2><span class="icon">üß¥</span> Consommables et Mat√©riaux</h2>
                    <div class="checkbox-grid">
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="consommable" value="huile-coupe" id="cons1">
                            <label for="cons1">üß¥ Huile de coupe</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="consommable" value="graisse" id="cons2">
                            <label for="cons2">üß¥ Graisse de lubrification</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="consommable" value="chiffons" id="cons3">
                            <label for="cons3">üßª Chiffons</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="consommable" value="gaz-soudure" id="cons4">
                            <label for="cons4">üî• Gaz de soudure</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="consommable" value="electrodes" id="cons5">
                            <label for="cons5">‚ö° √âlectrodes</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="consommable" value="fil-soudure" id="cons6">
                            <label for="cons6">üîó Fil de soudure</label>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 25px;">
                        <label>Mat√©riaux bruts n√©cessaires</label>
                        <textarea id="materiauxBruts" rows="3" placeholder="Ex: Barre d'acier √ò50mm longueur 100mm, Plaque aluminium 200x150x10mm..."></textarea>
                    </div>
                </div>

                <!-- VALIDATION -->
                <div class="form-section">
                    <h2><span class="icon">‚úÖ</span> Validation et Engagement</h2>
                    <div class="checkbox-grid">
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="validation" value="verif-machine" id="val1" required>
                            <label for="val1">‚úì J'ai v√©rifi√© la disponibilit√© de la machine</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="validation" value="verif-epi" id="val2" required>
                            <label for="val2">‚úì Tous les EPI sont disponibles et en bon √©tat</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="validation" value="verif-outils" id="val3" required>
                            <label for="val3">‚úì Tous les outils n√©cessaires sont disponibles</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="validation" value="consignes-securite" id="val4" required>
                            <label for="val4">‚úì Tous les participants connaissent les consignes de s√©curit√©</label>
                        </div>
                        <div class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="validation" value="engagement" id="val5" required>
                            <label for="val5">‚úì Je m'engage √† respecter toutes les r√®gles de s√©curit√©</label>
                        </div>
                    </div>
                </div>

                <div class="divider"></div>

                <!-- BOUTONS D'ACTION -->
                <div style="text-align: center; margin-top: 30px;">
                    <button type="button" class="btn btn-secondary" onclick="resetForm()">
                        <span class="icon">üîÑ</span> R√©initialiser
                    </button>
                    <button type="button" class="btn btn-primary" onclick="previewSummary()">
                        <span class="icon">üëÅÔ∏è</span> Aper√ßu
                    </button>
                    <button type="submit" class="btn btn-success">
                        <span class="icon">‚úì</span> Valider et Enregistrer
                    </button>
                </div>
            </form>
        </div>

        <div class="footer">
            <div class="logo" style="font-size: 2em; margin-bottom: 10px;">üèÜ ESIG Global Success</div>
            <p>√âcole Sup√©rieure d'Ing√©nierie et de Gestion</p>
            <p>Service Atelier - Maintenance et S√©curit√©</p>
            <p style="margin-top: 15px; opacity: 0.8;">¬© 2025 ESIG Global Success - Tous droits r√©serv√©s</p>
            <p>üìû Contact: +228 XX XX XX XX | üìß atelier@esig-globalsuccess.tg</p>
        </div>
    </div>

    <script>
        let members = [];

        // Toggle checkbox
        function toggleCheckbox(item) {
            const checkbox = item.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            item.classList.toggle('checked', checkbox.checked);
        }

        // Initialiser les cases coch√©es
        document.querySelectorAll('.checkbox-item input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                this.closest('.checkbox-item').classList.toggle('checked', this.checked);
            });
        });

        // Ajouter un membre
        function addMember() {
            const nom = document.getElementById('nomMembre').value.trim();
            const matricule = document.getElementById('matriculeMembre').value.trim();
            const classe = document.getElementById('classeMembre').value;
            const role = document.getElementById('roleMembre').value;

            if (!nom) {
                alert('‚ö†Ô∏è Veuillez entrer le nom du membre');
                return;
            }

            const member = {
                id: Date.now(),
                nom: nom,
                matricule: matricule || 'Non sp√©cifi√©',
                classe: classe || 'Non sp√©cifi√©',
                role: role || 'Non sp√©cifi√©'
            };

            members.push(member);
            updateMemberList();

            // Reset form
            document.getElementById('nomMembre').value = '';
            document.getElementById('matriculeMembre').value = '';
            document.getElementById('classeMembre').value = '';
            document.getElementById('roleMembre').value = '';

            document.getElementById('nomMembre').focus();
        }

        // Mettre √† jour la liste des membres
        function updateMemberList() {
            const listDiv = document.getElementById('memberList');
            const noMembers = document.getElementById('noMembers');

            if (members.length === 0) {
                noMembers.style.display = 'block';
                listDiv.querySelector('h3').textContent = 'Liste des membres (0)';
                return;
            }

            noMembers.style.display = 'none';
            listDiv.querySelector('h3').textContent = `Liste des membres (${members.length})`;

            const membersHTML = members.map(member => `
                <div class="member-item">
                    <div class="member-info">
                        <strong>${member.nom}</strong><br>
                        <span style="color: #6b7280;">Matricule: ${member.matricule} | Classe: ${member.classe} | R√¥le: ${member.role}</span>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeMember(${member.id})">
                        <span class="icon">üóëÔ∏è</span> Retirer
                    </button>
                </div>
            `).join('');

            // Supprimer le texte "Aucun membre" s'il existe
            const existingMembers = listDiv.querySelectorAll('.member-item');
            existingMembers.forEach(item => item.remove());

            listDiv.insertAdjacentHTML('beforeend', membersHTML);
        }

        // Retirer un membre
        function removeMember(id) {
            if (confirm('√ätes-vous s√ªr de vouloir retirer ce membre ?')) {
                members = members.filter(m => m.id !== id);
                updateMemberList();
            }
        }

        // Aper√ßu du r√©sum√©
        function previewSummary() {
            // Collecter les donn√©es
            const epiSelected = Array.from(document.querySelectorAll('input[name="epi"]:checked'))
                .map(cb => cb.parentElement.querySelector('label').textContent);

            const outilsSelected = Array.from(document.querySelectorAll('input[name="outil"]:checked'))
                .map(cb => cb.parentElement.querySelector('label').textContent);

            const consommablesSelected = Array.from(document.querySelectorAll('input[name="consommable"]:checked'))
                .map(cb => cb.parentElement.querySelector('label').textContent);

            const dateTP = document.getElementById('dateTP').value;
            const machine = document.getElementById('machine').options[document.getElementById('machine').selectedIndex]?.text || 'Non s√©lectionn√©';
            const responsable = document.getElementById('nomResponsable').value;
            const telResponsable = document.getElementById('telResponsable').value;

            let summary = `
                <h2 style="color: var(--primary); margin-bottom: 20px;">üìã R√©sum√© du Formulaire TP</h2>

                <div class="summary-card">
                    <h3>Informations g√©n√©rales</h3>
                    <div class="summary-item"><strong>Date:</strong> <span>${dateTP || 'Non sp√©cifi√©'}</span></div>
                    <div class="summary-item"><strong>Machine:</strong> <span>${machine}</span></div>
                    <div class="summary-item"><strong>Titre:</strong> <span>${document.getElementById('titreTP').value || 'Non sp√©cifi√©'}</span></div>
                </div>

                <div class="summary-card">
                    <h3>Responsable</h3>
                    <div class="summary-item"><strong>Nom:</strong> <span>${responsable || 'Non sp√©cifi√©'}</span></div>
                    <div class="summary-item"><strong>T√©l√©phone:</strong> <span>${telResponsable || 'Non sp√©cifi√©'}</span></div>
                </div>

                <div class="summary-card">
                    <h3>Membres de l'√©quipe (${members.length})</h3>
                    ${members.length > 0 ? members.map(m => `
                        <div class="summary-item">
                            <strong>${m.nom}</strong>
                            <span>${m.classe} - ${m.role}</span>
                        </div>
                    `).join('') : '<p style="text-align: center; color: #6b7280;">Aucun membre ajout√©</p>'}
                </div>

                <div class="summary-card">
                    <h3>EPI s√©lectionn√©s (${epiSelected.length})</h3>
                    ${epiSelected.length > 0 ? epiSelected.map(epi => `
                        <div class="summary-item">${epi}</div>
                    `).join('') : '<p style="text-align: center; color: #6b7280;">Aucun EPI s√©lectionn√©</p>'}
                </div>

                <div class="summary-card">
                    <h3>Outils s√©lectionn√©s (${outilsSelected.length})</h3>
                    ${outilsSelected.length > 0 ? outilsSelected.map(outil => `
                        <div class="summary-item">${outil}</div>
                    `).join('') : '<p style="text-align: center; color: #6b7280;">Aucun outil s√©lectionn√©</p>'}
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-primary" onclick="window.print()">
                        <span class="icon">üñ®Ô∏è</span> Imprimer
                    </button>
                </div>
            `;

            const newWindow = window.open('', 'Aper√ßu', 'width=800,height=600');
            newWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Aper√ßu - Formulaire TP</title>
                    <style>
                        body { font-family: 'Segoe UI', sans-serif; padding: 20px; background: #f3f4f6; }
                        .summary-card { background: white; padding: 20px; margin: 15px 0; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
                        .summary-item { padding: 10px; margin: 8px 0; background: #f9fafb; border-radius: 5px; display: flex; justify-content: space-between; }
                        h2 { color: #1a365d; }
                        h3 { color: #1a365d; margin-bottom: 15px; }
                        .btn { padding: 12px 25px; background: #2563eb; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1em; }
                        .btn:hover { background: #1d4ed8; }
                    </style>
                </head>
                <body>
                    <div style="max-width: 900px; margin: 0 auto;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h1 style="color: #1a365d; font-size: 2.5em;">üèÜ ESIG Global Success</h1>
                            <p style="color: #6b7280; font-size: 1.2em;">Formulaire de Pr√©paration TP Atelier</p>
                        </div>
                        ${summary}
                    </div>
                </body>
                </html>
            `);
        }

        // Soumission du formulaire
        function handleSubmit(event) {
            event.preventDefault();

            // V√©rifications
            if (members.length === 0) {
                alert('‚ö†Ô∏è Veuillez ajouter au moins un membre √† l\'√©quipe');
                return;
            }

            const epiChecked = document.querySelectorAll('input[name="epi"]:checked').length;
            if (epiChecked === 0) {
                alert('‚ö†Ô∏è Veuillez s√©lectionner au moins un EPI');
                return;
            }

            const outilsChecked = document.querySelectorAll('input[name="outil"]:checked').length;
            if (outilsChecked === 0) {
                alert('‚ö†Ô∏è Veuillez s√©lectionner au moins un outil');
                return;
            }

            const validationsChecked = document.querySelectorAll('input[name="validation"]:checked').length;
            if (validationsChecked < 5) {
                alert('‚ö†Ô∏è Vous devez cocher toutes les cases de validation');
                return;
            }

            // Simulation d'enregistrement
            const formData = {
                date: document.getElementById('dateTP').value,
                machine: document.getElementById('machine').value,
                titre: document.getElementById('titreTP').value,
                responsable: {
                    nom: document.getElementById('nomResponsable').value,
                    tel: document.getElementById('telResponsable').value,
                    email: document.getElementById('emailResponsable').value
                },
                membres: members,
                epi: Array.from(document.querySelectorAll('input[name="epi"]:checked')).map(cb => cb.value),
                outils: Array.from(document.querySelectorAll('input[name="outil"]:checked')).map(cb => cb.value),
                consommables: Array.from(document.querySelectorAll('input[name="consommable"]:checked')).map(cb => cb.value)
            };

            console.log('Donn√©es du formulaire:', formData);

            // Message de succ√®s
            alert(`‚úÖ Formulaire enregistr√© avec succ√®s!\n\n` +
                  `Num√©ro de TP: TP-${Date.now().toString().slice(-8)}\n` +
                  `Date: ${formData.date}\n` +
                  `Responsable: ${formData.responsable.nom}\n` +
                  `Membres: ${members.length}\n\n` +
                  `Un email de confirmation a √©t√© envoy√© √† tous les participants.`);

            // Optionnel: r√©initialiser le formulaire
            if (confirm('Voulez-vous r√©initialiser le formulaire pour un nouveau TP ?')) {
                resetForm();
            }
        }

        // R√©initialiser le formulaire
        function resetForm() {
            if (confirm('√ätes-vous s√ªr de vouloir r√©initialiser le formulaire ?')) {
                document.getElementById('tpForm').reset();
                members = [];
                updateMemberList();

                // D√©cocher toutes les checkboxes
                document.querySelectorAll('.checkbox-item').forEach(item => {
                    item.classList.remove('checked');
                    item.querySelector('input[type="checkbox"]').checked = false;
                });

                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Initialisation
        window.onload = function() {
            // Set date par d√©faut
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dateTP').value = today;

            // Set heure par d√©faut
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('heureDebut').value = `${hours}:${minutes}`;
        };
    </script>
</body>
</html>
